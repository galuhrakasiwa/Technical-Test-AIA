function cov_pvja9yklj(){var path="/home/acredia/newP/stackOverFlow/router/api/question.js";var hash="e65a91632eee11c23fb7da14e23172ad34004e2c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/acredia/newP/stackOverFlow/router/api/question.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:34}},"1":{start:{line:2,column:15},end:{line:2,column:31}},"2":{start:{line:3,column:17},end:{line:3,column:36}},"3":{start:{line:4,column:19},end:{line:4,column:37}},"4":{start:{line:5,column:15},end:{line:5,column:32}},"5":{start:{line:6,column:15},end:{line:6,column:38}},"6":{start:{line:7,column:12},end:{line:7,column:42}},"7":{start:{line:13,column:13},end:{line:13,column:41}},"8":{start:{line:16,column:16},end:{line:16,column:47}},"9":{start:{line:18,column:17},end:{line:18,column:50}},"10":{start:{line:19,column:17},end:{line:19,column:49}},"11":{start:{line:28,column:0},end:{line:40,column:2}},"12":{start:{line:29,column:24},end:{line:35,column:6}},"13":{start:{line:36,column:4},end:{line:39,column:59}},"14":{start:{line:38,column:24},end:{line:38,column:42}},"15":{start:{line:39,column:20},end:{line:39,column:58}},"16":{start:{line:47,column:0},end:{line:56,column:4}},"17":{start:{line:51,column:6},end:{line:54,column:75}},"18":{start:{line:53,column:28},end:{line:53,column:46}},"19":{start:{line:54,column:24},end:{line:54,column:73}},"20":{start:{line:63,column:2},end:{line:78,column:4}},"21":{start:{line:64,column:6},end:{line:77,column:39}},"22":{start:{line:66,column:29},end:{line:70,column:11}},"23":{start:{line:71,column:10},end:{line:71,column:46}},"24":{start:{line:72,column:10},end:{line:75,column:43}},"25":{start:{line:74,column:30},end:{line:74,column:48}},"26":{start:{line:75,column:26},end:{line:75,column:42}},"27":{start:{line:77,column:22},end:{line:77,column:38}},"28":{start:{line:83,column:0},end:{line:109,column:4}},"29":{start:{line:87,column:6},end:{line:107,column:42}},"30":{start:{line:89,column:10},end:{line:105,column:46}},"31":{start:{line:92,column:14},end:{line:98,column:15}},"32":{start:{line:94,column:30},end:{line:94,column:79}},"33":{start:{line:97,column:16},end:{line:97,column:82}},"34":{start:{line:99,column:14},end:{line:99,column:62}},"35":{start:{line:100,column:14},end:{line:103,column:50}},"36":{start:{line:102,column:36},end:{line:102,column:54}},"37":{start:{line:103,column:32},end:{line:103,column:48}},"38":{start:{line:105,column:28},end:{line:105,column:44}},"39":{start:{line:107,column:24},end:{line:107,column:40}},"40":{start:{line:114,column:2},end:{line:133,column:4}},"41":{start:{line:115,column:4},end:{line:132,column:47}},"42":{start:{line:119,column:8},end:{line:121,column:9}},"43":{start:{line:120,column:12},end:{line:120,column:80}},"44":{start:{line:122,column:27},end:{line:124,column:31}},"45":{start:{line:123,column:31},end:{line:123,column:38}},"46":{start:{line:126,column:8},end:{line:126,column:38}},"47":{start:{line:127,column:8},end:{line:130,column:50}},"48":{start:{line:129,column:26},end:{line:129,column:44}},"49":{start:{line:130,column:24},end:{line:130,column:49}},"50":{start:{line:132,column:20},end:{line:132,column:46}},"51":{start:{line:137,column:0},end:{line:137,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:28,column:66},end:{line:28,column:67}},loc:{start:{line:28,column:79},end:{line:40,column:1}},line:28},"1":{name:"(anonymous_1)",decl:{start:{line:38,column:10},end:{line:38,column:11}},loc:{start:{line:38,column:24},end:{line:38,column:42}},line:38},"2":{name:"(anonymous_2)",decl:{start:{line:39,column:11},end:{line:39,column:12}},loc:{start:{line:39,column:20},end:{line:39,column:58}},line:39},"3":{name:"(anonymous_3)",decl:{start:{line:50,column:4},end:{line:50,column:5}},loc:{start:{line:50,column:18},end:{line:55,column:5}},line:50},"4":{name:"(anonymous_4)",decl:{start:{line:53,column:14},end:{line:53,column:15}},loc:{start:{line:53,column:28},end:{line:53,column:46}},line:53},"5":{name:"(anonymous_5)",decl:{start:{line:54,column:15},end:{line:54,column:16}},loc:{start:{line:54,column:24},end:{line:54,column:73}},line:54},"6":{name:"(anonymous_6)",decl:{start:{line:63,column:78},end:{line:63,column:79}},loc:{start:{line:63,column:92},end:{line:78,column:3}},line:63},"7":{name:"(anonymous_7)",decl:{start:{line:65,column:12},end:{line:65,column:13}},loc:{start:{line:65,column:26},end:{line:76,column:7}},line:65},"8":{name:"(anonymous_8)",decl:{start:{line:74,column:16},end:{line:74,column:17}},loc:{start:{line:74,column:30},end:{line:74,column:48}},line:74},"9":{name:"(anonymous_9)",decl:{start:{line:75,column:17},end:{line:75,column:18}},loc:{start:{line:75,column:26},end:{line:75,column:42}},line:75},"10":{name:"(anonymous_10)",decl:{start:{line:77,column:13},end:{line:77,column:14}},loc:{start:{line:77,column:22},end:{line:77,column:38}},line:77},"11":{name:"(anonymous_11)",decl:{start:{line:86,column:4},end:{line:86,column:5}},loc:{start:{line:86,column:18},end:{line:108,column:5}},line:86},"12":{name:"(anonymous_12)",decl:{start:{line:88,column:14},end:{line:88,column:15}},loc:{start:{line:88,column:27},end:{line:106,column:9}},line:88},"13":{name:"(anonymous_13)",decl:{start:{line:91,column:18},end:{line:91,column:19}},loc:{start:{line:91,column:32},end:{line:104,column:13}},line:91},"14":{name:"(anonymous_14)",decl:{start:{line:94,column:18},end:{line:94,column:19}},loc:{start:{line:94,column:30},end:{line:94,column:79}},line:94},"15":{name:"(anonymous_15)",decl:{start:{line:102,column:22},end:{line:102,column:23}},loc:{start:{line:102,column:36},end:{line:102,column:54}},line:102},"16":{name:"(anonymous_16)",decl:{start:{line:103,column:23},end:{line:103,column:24}},loc:{start:{line:103,column:32},end:{line:103,column:48}},line:103},"17":{name:"(anonymous_17)",decl:{start:{line:105,column:19},end:{line:105,column:20}},loc:{start:{line:105,column:28},end:{line:105,column:44}},line:105},"18":{name:"(anonymous_18)",decl:{start:{line:107,column:15},end:{line:107,column:16}},loc:{start:{line:107,column:24},end:{line:107,column:40}},line:107},"19":{name:"(anonymous_19)",decl:{start:{line:114,column:82},end:{line:114,column:83}},loc:{start:{line:114,column:96},end:{line:133,column:3}},line:114},"20":{name:"(anonymous_20)",decl:{start:{line:118,column:11},end:{line:118,column:12}},loc:{start:{line:118,column:24},end:{line:131,column:5}},line:118},"21":{name:"(anonymous_21)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:31},end:{line:123,column:38}},line:123},"22":{name:"(anonymous_22)",decl:{start:{line:129,column:14},end:{line:129,column:15}},loc:{start:{line:129,column:26},end:{line:129,column:44}},line:129},"23":{name:"(anonymous_23)",decl:{start:{line:130,column:15},end:{line:130,column:16}},loc:{start:{line:130,column:24},end:{line:130,column:49}},line:130},"24":{name:"(anonymous_24)",decl:{start:{line:132,column:11},end:{line:132,column:12}},loc:{start:{line:132,column:20},end:{line:132,column:46}},line:132}},branchMap:{"0":{loc:{start:{line:92,column:14},end:{line:98,column:15}},type:"if",locations:[{start:{line:92,column:14},end:{line:98,column:15}},{start:{line:92,column:14},end:{line:98,column:15}}],line:92},"1":{loc:{start:{line:119,column:8},end:{line:121,column:9}},type:"if",locations:[{start:{line:119,column:8},end:{line:121,column:9}},{start:{line:119,column:8},end:{line:121,column:9}}],line:119}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e65a91632eee11c23fb7da14e23172ad34004e2c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_pvja9yklj=function(){return actualCoverage;};}return actualCoverage;}cov_pvja9yklj();const express=(cov_pvja9yklj().s[0]++,require('express'));const router=(cov_pvja9yklj().s[1]++,express.Router());const passport=(cov_pvja9yklj().s[2]++,require('passport'));const{Router}=(cov_pvja9yklj().s[3]++,require("express"));const bcrypt=(cov_pvja9yklj().s[4]++,require('bcrypt'));const jsonwt=(cov_pvja9yklj().s[5]++,require('jsonwebtoken'));const key=(cov_pvja9yklj().s[6]++,require("../../setup/mongodb"));// const multer = require('multer');
// var upload = multer({ dest: 'uploads/' })
// const path = require ('path');
//import user schema
const User=(cov_pvja9yklj().s[7]++,require('../../models/user'));const Profile=(cov_pvja9yklj().s[8]++,require("../../models/profile"));const Question=(cov_pvja9yklj().s[9]++,require('../../models/question'));const question=(cov_pvja9yklj().s[10]++,require('../../models/question'));//@POST
// @ question/
// @ router post question
// @accses private
cov_pvja9yklj().s[11]++;router.post('/',passport.authenticate('jwt',{seasson:false}),(req,res)=>{cov_pvja9yklj().f[0]++;const newQuestion=(cov_pvja9yklj().s[12]++,new Question({question1:req.body.question1,question2:req.body.question2,user:req.user.user,nama:req.user.nama}));cov_pvja9yklj().s[13]++;newQuestion.save().then(question=>{cov_pvja9yklj().f[1]++;cov_pvja9yklj().s[14]++;return res.json(question);}).catch(err=>{cov_pvja9yklj().f[2]++;cov_pvja9yklj().s[15]++;return console.log('unabel push to database');});});//@ GET
// @ question
// provate
cov_pvja9yklj().s[16]++;router.get("/",passport.authenticate("jwt",{seasson:false}),(req,res)=>{cov_pvja9yklj().f[3]++;cov_pvja9yklj().s[17]++;Question.find().sort({date:"desc"})// sorting
.then(question=>{cov_pvja9yklj().f[4]++;cov_pvja9yklj().s[18]++;return res.json(question);}).catch(err=>{cov_pvja9yklj().f[5]++;cov_pvja9yklj().s[19]++;return console.log({noquestion:"noquestion display"});});});// @ POST
// @ question/answer/id
cov_pvja9yklj().s[20]++;router.post('/answer/:id',passport.authenticate('jwt',{session:false}),(req,res)=>{cov_pvja9yklj().f[6]++;cov_pvja9yklj().s[21]++;Question.findById(req.params.id).then(question=>{cov_pvja9yklj().f[7]++;const newAnswers=(cov_pvja9yklj().s[22]++,{user:req.user.id,nama:req.user.nama,text:req.body.text});cov_pvja9yklj().s[23]++;question.answers.unshift(newAnswers);cov_pvja9yklj().s[24]++;question.save().then(question=>{cov_pvja9yklj().f[8]++;cov_pvja9yklj().s[25]++;return res.json(question);}).catch(err=>{cov_pvja9yklj().f[9]++;cov_pvja9yklj().s[26]++;return console.log(err);});}).catch(err=>{cov_pvja9yklj().f[10]++;cov_pvja9yklj().s[27]++;return console.log(err);});});// @ POST
// @ question/upvote/id
cov_pvja9yklj().s[28]++;router.post("/upvote/:id",passport.authenticate("jwt",{session:false}),(req,res)=>{cov_pvja9yklj().f[11]++;cov_pvja9yklj().s[29]++;Profile.findOne({user:req.user.id}).then(profile=>{cov_pvja9yklj().f[12]++;cov_pvja9yklj().s[30]++;Question.findById(req.params.id).then(question=>{cov_pvja9yklj().f[13]++;cov_pvja9yklj().s[31]++;if(question.upvotes.filter(upvote=>{cov_pvja9yklj().f[14]++;cov_pvja9yklj().s[32]++;return upvote.user.toString()===req.user.id.toString();}).length>0){cov_pvja9yklj().b[0][0]++;cov_pvja9yklj().s[33]++;return res.status(400).json({noupvote:"User already upvoted"});}else{cov_pvja9yklj().b[0][1]++;}cov_pvja9yklj().s[34]++;question.upvotes.unshift({user:req.user.id});cov_pvja9yklj().s[35]++;question.save().then(question=>{cov_pvja9yklj().f[15]++;cov_pvja9yklj().s[36]++;return res.json(question);}).catch(err=>{cov_pvja9yklj().f[16]++;cov_pvja9yklj().s[37]++;return console.log(err);});}).catch(err=>{cov_pvja9yklj().f[17]++;cov_pvja9yklj().s[38]++;return console.log(err);});}).catch(err=>{cov_pvja9yklj().f[18]++;cov_pvja9yklj().s[39]++;return console.log(err);});});//@ DELETE
// @ question/delete/id
cov_pvja9yklj().s[40]++;router.delete('/delete/:id',passport.authenticate('jwt',{session:false}),(req,res)=>{cov_pvja9yklj().f[19]++;cov_pvja9yklj().s[41]++;Question.findOne({question:req.question.id}).then(question=>{cov_pvja9yklj().f[20]++;cov_pvja9yklj().s[42]++;if(!question){cov_pvja9yklj().b[1][0]++;cov_pvja9yklj().s[43]++;res.status(404).res.json({questionnotfound:'question Not Found'});}else{cov_pvja9yklj().b[1][1]++;}const removethis=(cov_pvja9yklj().s[44]++,question.modifiedPaths(item=>{cov_pvja9yklj().f[21]++;cov_pvja9yklj().s[45]++;return item.id;}).indexOf(req.params.id));cov_pvja9yklj().s[46]++;question.splice(removethis,1);cov_pvja9yklj().s[47]++;question.save().then(question=>{cov_pvja9yklj().f[22]++;cov_pvja9yklj().s[48]++;return res.json(question);}).catch(err=>{cov_pvja9yklj().f[23]++;cov_pvja9yklj().s[49]++;return console.log('wew'+err);});}).catch(err=>{cov_pvja9yklj().f[24]++;cov_pvja9yklj().s[50]++;return console.log('error'+err);});});cov_pvja9yklj().s[51]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInF1ZXN0aW9uLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwicGFzc3BvcnQiLCJiY3J5cHQiLCJqc29ud3QiLCJrZXkiLCJVc2VyIiwiUHJvZmlsZSIsIlF1ZXN0aW9uIiwicXVlc3Rpb24iLCJwb3N0IiwiYXV0aGVudGljYXRlIiwic2Vhc3NvbiIsInJlcSIsInJlcyIsIm5ld1F1ZXN0aW9uIiwicXVlc3Rpb24xIiwiYm9keSIsInF1ZXN0aW9uMiIsInVzZXIiLCJuYW1hIiwic2F2ZSIsInRoZW4iLCJqc29uIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZ2V0IiwiZmluZCIsInNvcnQiLCJkYXRlIiwibm9xdWVzdGlvbiIsInNlc3Npb24iLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwibmV3QW5zd2VycyIsInRleHQiLCJhbnN3ZXJzIiwidW5zaGlmdCIsImZpbmRPbmUiLCJwcm9maWxlIiwidXB2b3RlcyIsImZpbHRlciIsInVwdm90ZSIsInRvU3RyaW5nIiwibGVuZ3RoIiwic3RhdHVzIiwibm91cHZvdGUiLCJkZWxldGUiLCJxdWVzdGlvbm5vdGZvdW5kIiwicmVtb3ZldGhpcyIsIm1vZGlmaWVkUGF0aHMiLCJpdGVtIiwiaW5kZXhPZiIsInNwbGljZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJra1FBZVk7eUZBZlosS0FBTUEsQ0FBQUEsT0FBTyx5QkFBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBVixDQUFiLENBQ0EsS0FBTUMsQ0FBQUEsTUFBTSx5QkFBR0YsT0FBTyxDQUFDRyxNQUFSLEVBQUgsQ0FBWixDQUNBLEtBQU1DLENBQUFBLFFBQVEseUJBQUdILE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBZCxDQUNBLEtBQU0sQ0FBRUUsTUFBRiwwQkFBYUYsT0FBTyxDQUFDLFNBQUQsQ0FBcEIsQ0FBTixDQUNBLEtBQU1JLENBQUFBLE1BQU0seUJBQUdKLE9BQU8sQ0FBQyxRQUFE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LG1EQUNWSyxHQUFHLENBQUNrQyxNQUFKLENBQVcsR0FBWCxFQUFnQmxDLEdBQWhCLENBQW9CUyxJQUFwQixDQUF5QixDQUFFNEIsZ0JBQWdCLENBQUcsb0JBQXJCLENBQXpCLEVBQ0gsQ0FGRCxnQ0FHQSxLQUFNQyxDQUFBQSxVQUFVLDBCQUFHM0MsUUFBUSxDQUMxQjRDLGFBRGtCLENBQ0pDLElBQUksRUFBSSx1REFBQUEsQ0FBQUEsSUFBSSxDQUFDbEIsRUFBTCxDQUFPLENBRFgsRUFFbEJtQixPQUZrQixDQUVWMUMsR0FBRyxDQUFDc0IsTUFBSixDQUFXQyxFQUZELENBQUgsQ0FBaEIsQ0FKZ0Isd0JBUWhCM0IsUUFBUSxDQUFDK0MsTUFBVCxDQUFnQkosVUFBaEIsQ0FBNEIsQ0FBNUIsRUFSZ0Isd0JBU2hCM0MsUUFBUSxDQUNQWSxJQURELEdBRUNDLElBRkQsQ0FFTWIsUUFBUSxFQUFJLHVEQUFBSyxDQUFBQSxHQUFHLENBQUNTLElBQUosQ0FBU2QsUUFBVCxFQUFrQixDQUZwQyxFQUdDZSxLQUhELENBR1FDLEdBQUQsRUFBUyx1REFBQUMsQ0FBQUEsT0FBTyxDQUFDQyxHQUFSLENBQWEsTUFBUUYsR0FBckIsRUFBeUIsQ0FIekMsRUFJSCxDQWhCRCxFQWlCQ0QsS0FqQkQsQ0FpQlFDLEdBQUQsRUFBUyx1REFBQUMsQ0FBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksUUFBVUYsR0FBdEIsRUFBMEIsQ0FqQjFDLEVBa0JELENBbkJELEUsd0JBdUJGZ0MsTUFBTSxDQUFDQyxPQUFQLENBQWlCMUQsTUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKVxuY29uc3QgcGFzc3BvcnQgPSByZXF1aXJlKCdwYXNzcG9ydCcpO1xuY29uc3QgeyBSb3V0ZXIgfSA9IHJlcXVpcmUoXCJleHByZXNzXCIpO1xuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0Jyk7XG5jb25zdCBqc29ud3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcbmNvbnN0IGtleSA9IHJlcXVpcmUoXCIuLi8uLi9zZXR1cC9tb25nb2RiXCIpO1xuLy8gY29uc3QgbXVsdGVyID0gcmVxdWlyZSgnbXVsdGVyJyk7XG4vLyB2YXIgdXBsb2FkID0gbXVsdGVyKHsgZGVzdDogJ3VwbG9hZHMvJyB9KVxuLy8gY29uc3QgcGF0aCA9IHJlcXVpcmUgKCdwYXRoJyk7XG5cbi8vaW1wb3J0IHVzZXIgc2NoZW1hXG5jb25zdCBVc2VyID0gcmVxdWlyZSgnLi4vLi4vbW9kZWxzL3VzZXInKTtcblxuXG5jb25zdCBQcm9maWxlID0gcmVxdWlyZShcIi4uLy4uL21vZGVscy9wcm9maWxlXCIpO1xuXG5jb25zdCBRdWVzdGlvbiA9IHJlcXVpcmUgKCcuLi8uLi9tb2RlbHMvcXVlc3Rpb24nKTtcbmNvbnN0IHF1ZXN0aW9uID0gcmVxdWlyZSgnLi4vLi4vbW9kZWxzL3F1ZXN0aW9uJyk7XG5cblxuLy9AUE9TVFxuLy8gQCBxdWVzdGlvbi9cbi8vIEAgcm91dGVyIHBvc3QgcXVlc3Rpb25cbi8vIEBhY2NzZXMgcHJpdmF0ZVxuXG5cbnJvdXRlci5wb3N0KCcvJywgcGFzc3BvcnQuYXV0aGVudGljYXRlKCdqd3QnLCB7IHNlYXNzb246IGZhbHNlfSksIChyZXEscmVzKSA9PiB7XG4gICAgY29uc3QgbmV3UXVlc3Rpb24gPSBuZXcgUXVlc3Rpb24gKHtcblxuICAgIHF1ZXN0aW9uMTogcmVxLmJvZHkucXVlc3Rpb24xLFxuICAgIHF1ZXN0aW9uMjogcmVxLmJvZHkucXVlc3Rpb24yLFxuICAgIHVzZXI6IHJlcS51c2VyLnVzZXIsXG4gICAgbmFtYTogcmVxLnVzZXIubmFtYVxuICAgIH0pXG4gICAgbmV3UXVlc3Rpb25cbiAgICAuc2F2ZSgpXG4gICAgLnRoZW4oKHF1ZXN0aW9uKSA9PiByZXMuanNvbihxdWVzdGlvbikpXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKCd1bmFiZWwgcHVzaCB0byBkYXRhYmFzZScpKVxufSlcblxuXG4vL0AgR0VUXG4vLyBAIHF1ZXN0aW9uXG4vLyBwcm92YXRlXG5cbnJvdXRlci5nZXQoXG4gICAgXCIvXCIsXG4gICAgcGFzc3BvcnQuYXV0aGVudGljYXRlKFwiand0XCIsIHsgc2Vhc3NvbjogZmFsc2UgfSksXG4gICAgKHJlcSwgcmVzKSA9PiB7XG4gICAgICBRdWVzdGlvbi5maW5kKClcbiAgICAgICAgLnNvcnQoeyBkYXRlOiBcImRlc2NcIiB9KSAvLyBzb3J0aW5nXG4gICAgICAgIC50aGVuKChxdWVzdGlvbikgPT4gcmVzLmpzb24ocXVlc3Rpb24pKVxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coeyBub3F1ZXN0aW9uOiBcIm5vcXVlc3Rpb24gZGlzcGxheVwiIH0pKTtcbiAgICB9XG4gICk7XG5cblxuLy8gQCBQT1NUXG4vLyBAIHF1ZXN0aW9uL2Fuc3dlci9pZFxuXG5cbiAgcm91dGVyLnBvc3QoJy9hbnN3ZXIvOmlkJywgcGFzc3BvcnQuYXV0aGVudGljYXRlKCdqd3QnLCB7IHNlc3Npb246IGZhbHNlfSksIChyZXEsIHJlcykgPT4ge1xuICAgICAgUXVlc3Rpb24uZmluZEJ5SWQoIHJlcS5wYXJhbXMuaWQgKVxuICAgICAgLnRoZW4oKHF1ZXN0aW9uKSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3QW5zd2VycyA9IHtcbiAgICAgICAgICAgICAgdXNlcjogcmVxLnVzZXIuaWQsXG4gICAgICAgICAgICAgIG5hbWE6cmVxLnVzZXIubmFtYSxcbiAgICAgICAgICAgICAgdGV4dDogcmVxLmJvZHkudGV4dFxuICAgICAgICAgIH1cbiAgICAgICAgICBxdWVzdGlvbi5hbnN3ZXJzLnVuc2hpZnQobmV3QW5zd2VycylcbiAgICAgICAgICBxdWVzdGlvblxuICAgICAgICAgIC5zYXZlKClcbiAgICAgICAgICAudGhlbigocXVlc3Rpb24pID0+IHJlcy5qc29uKHF1ZXN0aW9uKSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSkgXG4gIH0pXG5cbi8vIEAgUE9TVFxuLy8gQCBxdWVzdGlvbi91cHZvdGUvaWRcblxucm91dGVyLnBvc3QoXG4gICAgXCIvdXB2b3RlLzppZFwiLFxuICAgIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZShcImp3dFwiLCB7IHNlc3Npb246IGZhbHNlIH0pLFxuICAgIChyZXEsIHJlcykgPT4ge1xuICAgICAgUHJvZmlsZS5maW5kT25lKHsgdXNlcjogcmVxLnVzZXIuaWQgfSlcbiAgICAgICAgLnRoZW4oKHByb2ZpbGUpID0+IHtcbiAgICAgICAgICBRdWVzdGlvbi5maW5kQnlJZChyZXEucGFyYW1zLmlkKVxuICAgICAgICAgIFxuICAgICAgICAgICAgLnRoZW4oKHF1ZXN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBxdWVzdGlvbi51cHZvdGVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICh1cHZvdGUpID0+IHVwdm90ZS51c2VyLnRvU3RyaW5nKCkgPT09IHJlcS51c2VyLmlkLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICApLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgKSAge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG5vdXB2b3RlOiBcIlVzZXIgYWxyZWFkeSB1cHZvdGVkXCIgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcXVlc3Rpb24udXB2b3Rlcy51bnNoaWZ0KHsgdXNlcjogcmVxLnVzZXIuaWQgfSk7XG4gICAgICAgICAgICAgIHF1ZXN0aW9uXG4gICAgICAgICAgICAgICAgLnNhdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKChxdWVzdGlvbikgPT4gcmVzLmpzb24ocXVlc3Rpb24pKVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICB9XG4gICk7XG5cbiAgLy9AIERFTEVURVxuICAvLyBAIHF1ZXN0aW9uL2RlbGV0ZS9pZFxuXG4gIHJvdXRlci5kZWxldGUoJy9kZWxldGUvOmlkJyAsIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgnand0JyAsIHsgc2Vzc2lvbjogZmFsc2V9KSwgKHJlcSwgcmVzKSA9PiB7XG4gICAgUXVlc3Rpb24uZmluZE9uZSh7cXVlc3Rpb246IHJlcS5xdWVzdGlvbi5pZH0pXG5cbiAgICBcbiAgICAudGhlbiggcXVlc3Rpb24gID0+IHtcbiAgICAgICAgaWYoIXF1ZXN0aW9uKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkucmVzLmpzb24oeyBxdWVzdGlvbm5vdGZvdW5kIDogJ3F1ZXN0aW9uIE5vdCBGb3VuZCd9KVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbW92ZXRoaXMgPSBxdWVzdGlvblxuICAgICAgICAubW9kaWZpZWRQYXRocyhpdGVtID0+IGl0ZW0uaWQpXG4gICAgICAgIC5pbmRleE9mKHJlcS5wYXJhbXMuaWQpXG5cbiAgICAgICAgcXVlc3Rpb24uc3BsaWNlKHJlbW92ZXRoaXMsIDEpXG4gICAgICAgIHF1ZXN0aW9uXG4gICAgICAgIC5zYXZlKClcbiAgICAgICAgLnRoZW4ocXVlc3Rpb24gPT4gcmVzLmpzb24ocXVlc3Rpb24pKVxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2cgKCd3ZXcnICsgZXJyKSlcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZygnZXJyb3InICsgZXJyKSlcbiAgfSlcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdfQ==